<!DOCTYPE html>
<html lang="en" >
<head>
    <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>

    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>


      <div id="elem1" class="elem"></div>
      <div id="elem2" class="elem"></div>
      <div id="elem3" class="elem"></div>







<script>
  var htmlData = [];

  htmlData[0] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };
  htmlData[1] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };
  htmlData[2] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };
  htmlData[3] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };
  htmlData[4] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };
  htmlData[5] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };
  htmlData[6] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };
  htmlData[7] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };
  htmlData[8] = {
    title: 'round',
    price: '$ 0,07143',
    date: '31 dec 2017'
  };


  var canv1 = document.getElementById("canv1"),
      canv2 = document.getElementById("canv2"),
      canv3 = document.getElementById("canv3");

  var activeItems = 3;
  var baseSize = 8,

      firstLineLength = baseSize * 4,
      radius = baseSize * 2,
      secondLineLength = baseSize * 7,
      elementWidth = function() {
        return firstLineLength + radius * 2 + secondLineLength;
      };

var drawElement = function(div, number) {



  var startX = 0,
      startY = 75,
      color1 = "#a034bb",
      color2 = "#d80a95",
      circleColor1 = "#a034bb",
      circleFill = "transparent",
      lineStrokeWidth = baseSize/2,
      circleWidth = baseSize/2;
      console.log(firstLineLength);

  var line1 = {
      x1: startX,
      y1: startY,
      x2: startX + firstLineLength,
      y2: startY,
      color: color1,
      width: lineStrokeWidth

  };



  var whiteLine = {
    x1: startX + firstLineLength + radius,
    y1: startY - radius - circleWidth/2-1,
    x2: function() {
      return this.x1
    },
    y2: function() {
      return this.y1 + radius * 2 + circleWidth+2;
    },
    color: "white",
    width: circleWidth

  };

  var line2 = {
      x1: startX + firstLineLength + radius * 2,
      y1: startY,
      x2: function() {
        console.log(this.x1);
        return this.x1 + secondLineLength;
      },
      y2: startY,
      color: color2,
      width: lineStrokeWidth

  };

  var stops1 = [
    {
        "color": "#a034bb",
        "offset": "0%"
    },{
        "color": "#d80a95",
        "offset": "100%"
    }
  ];

  var stops2 = [
    {
        "color": "#d80a95",
        "offset": "0%"
    },{
        "color": "#a034bb",
        "offset": "100%"
    }
  ];



  var svgns = 'http://www.w3.org/2000/svg';

  var defs = document.createElementNS(svgns, 'defs');
  var gradient1 = document.createElementNS(svgns, 'linearGradient');

  gradient1.setAttribute("id","grad1");
  for (var i = 0, length = stops1.length; i < length; i++) {

    // Create a <stop> element and set its offset based on the position of the for loop.
    var stop = document.createElementNS(svgns, 'stop');
    stop.setAttribute('offset', stops1[i].offset);
    stop.setAttribute('stop-color', stops1[i].color);

    // Add the stop to the <lineargradient> element.
    gradient1.appendChild(stop);

  }

  defs.appendChild(gradient1);

  var gradient2 = document.createElementNS(svgns, 'linearGradient');

  gradient2.setAttribute("id","grad2");
  for (var i = 0, length = stops2.length; i < length; i++) {

    // Create a <stop> element and set its offset based on the position of the for loop.
    var stop = document.createElementNS(svgns, 'stop');
    stop.setAttribute('offset', stops2[i].offset);
    stop.setAttribute('stop-color', stops2[i].color);

    // Add the stop to the <lineargradient> element.
    gradient2.appendChild(stop);

  }

  defs.appendChild(gradient2);




for (var el=1; el <=3; el++) {
  var svg = document.createElementNS(svgns, 'svg');
  svg.setAttribute('width', elementWidth());
  svg.setAttribute('height', '150px');
  svg.setAttribute('version', '1.1');
  svg.setAttribute('xmlns', svgns);
  svg.appendChild(defs);
  console.log(defs);



  var pLine1 = document.createElementNS("http://www.w3.org/2000/svg", "path");
      pLine1.setAttribute("d", "M" + line1.x1 + " "+ line1.y1 + " L" + line1.x2 +" " +line1.y2 + ".01");
      pLine1.setAttribute("stroke", "url(#grad2)");
      pLine1.setAttribute("stroke-width", line1.width);
      pLine1.setAttribute("stroke-linecap", "butt");

  var pLine2 = document.createElementNS("http://www.w3.org/2000/svg", "path");
      pLine2.setAttribute("d", "M" + line2.x1 + " " + line2.y1 + ".01 L" + line2.x2() +" " + line2.y2 );
      pLine2.setAttribute("stroke", "url(#grad1)");
      pLine2.setAttribute("stroke-width", line1.width);
      pLine2.setAttribute("stroke-linecap", "butt");

  var circle1 = {
    cx: startX + firstLineLength + radius,
    cy: startY,
    r: radius,
    width: circleWidth,
    color: circleColor1,
    fill: circleFill
  };


  var circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circle.setAttribute("cx", circle1.cx);
      circle.setAttribute("cy", circle1.cy);
      circle.setAttribute("r", circle1.r);
      circle.setAttribute("stroke", circle1.color);
      circle.setAttribute("stroke-width", circle1.width);
      circle.setAttribute("fill", circle1.fill);

  var wLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
      wLine.setAttribute("x1", whiteLine.x1);
      wLine.setAttribute("y1", whiteLine.y1);
      wLine.setAttribute("x2", whiteLine.x2());
      wLine.setAttribute("y2", whiteLine.y2());
      wLine.setAttribute("stroke-width", whiteLine.width);
      wLine.setAttribute("stroke", whiteLine.color);





    svg.appendChild(pLine1);
    svg.appendChild(circle);
    svg.appendChild(wLine);
    svg.appendChild(pLine2);
    console.log(svg);
    number++;



    var svgBox = document.createElement('div');
    svgBox.className = "svgBox active";
    svgBox.appendChild(svg);







    div.appendChild(svgBox);



}

}

  var elem1 = document.getElementById("elem1");
  drawElement(elem1,1);

  var elem2 = document.getElementById("elem2");
  drawElement(elem2,1);

  var elem3 = document.getElementById("elem3");
  drawElement(elem3,1);



var boxes = document.getElementsByClassName("svgBox");

console.log("278 " + boxes.length);

for (var n=0; n<boxes.length; n++) {
  var box = boxes[n];
  var textBox = document.createElement('div');
      textBox.className = "title";
      textBox.style.fontSize = baseSize*2+"px";

      textBox.innerHTML = htmlData[n].title;
      box.appendChild(textBox);

  var numberBox = document.createElement('div');
      numberBox.className = "number";
      numberBox.style.fontSize = baseSize*3+"px";
      numberBox.innerHTML = n+1;
      box.appendChild(numberBox);


  var priceBox = document.createElement('div');
      priceBox.className = "price gradient-text";
      priceBox.style.fontSize = Math.round(baseSize * 2.25) +"px";
      priceBox.innerHTML = htmlData[n].price;
      box.appendChild(priceBox);

  var dateBox = document.createElement('div');
      dateBox.className = "date";

      dateBox.innerHTML = htmlData[n].date;
      box.appendChild(dateBox);

      if(n >= activeItems) {
        box.className = "svgBox";

        var svgElement = $('svg path',box);
        svgElement[0].style.stroke = "lightgrey";
        svgElement[1].style.stroke = "lightgrey";

        var svgElement = $('svg circle',box);
        svgElement[0].style.stroke = "lightgrey";


        console.log(svgElement);
      }


}




</script>



</body>
</html>
